;-*-Lisp-*-

(require 'cask "/usr/local/Cellar/cask/0.7.0/cask.el")
(cask-initialize)
(require 'pallet)
(require 'package)
(add-to-list 'package-archives '("org" . "http://orgmode.org/elpa/") t)
(load-theme 'solarized-light t)
(projectile-global-mode)
    (require 'ido)
    (ido-mode t)
(defun set-tab-width (width)
  (interactive "nSet tab width: ")
  (setq tab-width width))

(require 'org-gcal)
(setq org-gcal-client-id "1057237893562-iq24bqiease9336c66kfj451sg5sm9i5.apps.googleusercontent.com"
      org-gcal-client-secret "jbqgULmrW5Sidy0tJwuaCqFg"
      org-gcal-file-alist '(("sergio.rrd@gmail.com" .  "~/Dropbox/orgfiles/calendar.org")))

;; set up buf-move
(global-set-key (kbd "<C-S-up>")     'buf-move-up)
(global-set-key (kbd "<C-S-down>")   'buf-move-down)
(global-set-key (kbd "<C-S-left>")   'buf-move-left)
(global-set-key (kbd "<C-S-right>")  'buf-move-right)

(require 'yasnippet)			
(yas-global-mode 1)

(require 'rvm)

(setq org-default-notes-file (concat org-directory "/inbox.org"))
(define-key global-map "\C-cc" 'org-capture)

(global-set-key "\C-cl" 'org-store-link)
(global-set-key "\C-cc" 'org-capture)
(global-set-key "\C-ca" 'org-agenda)
(global-set-key "\C-cb" 'org-iswitchb)
(add-hook 'org-mode-hook 'turn-on-font-lock)

;; auto complete mode
(add-to-list 'load-path "~/.emacs.d/")
(require 'auto-complete-config)
(add-to-list 'ac-dictionary-directories "~/.emacs.d/.cask/24.3.1/elpa/auto-complete-20140618.2217/dict")
(ac-config-default)
(add-to-list 'ac-modes 'enh-ruby-mode)
(add-to-list 'ac-modes 'haml-mode)

;windmore
(require 'windmove)
(when (fboundp 'windmove-default-keybindings)
  (windmove-default-keybindings))
;; turn on truncate long lines
(toggle-truncate-lines t)

;; turn on highlight current line
(global-hl-line-mode 1)

;; magit status
(global-set-key (kbd "C-x g") 'magit-status)

;; set up flx-ido
(require 'flx-ido)
(ido-mode 1)
(ido-everywhere 1)
(flx-ido-mode 1)
;; disable ido faces to see flx highlights.
(setq ido-enable-flex-matching t)
(setq ido-use-faces nil)

;; turn off menu bar
(menu-bar-mode -1)
(tool-bar-mode -1)
;; set up line numbers on for source code files
(add-hook 'abg-code-modes-hook
          (lambda () (linum-mode 1))
          (lambda () (auto-fill-mode 0)))
(add-hook 'ruby-mode-hook
          (lambda () (run-hooks 'abg-code-modes-hook)))


(add-hook 'enh-ruby-mode-hook
          (lambda () (run-hooks 'abg-code-modes-hook)))

(add-hook 'nxhtml-mode-hook
          (lambda () (run-hooks 'abg-code-modes-hook)))

;; set up ispell
(setq ispell-program-name "/usr/local/bin/ispell")

;; projectile mode
(add-hook 'ruby-mode-hook 'projectile-on)
(add-hook 'projectile-mode-hook 'projectile-rails-on)

;; automatically save buffers associated with files on buffer switch
;; and on windows switch
(defadvice switch-to-buffer (before save-buffer-now activate)
  (when buffer-file-name (save-buffer)))
(defadvice other-window (before other-window-now activate)
  (when buffer-file-name (save-buffer)))
(defadvice windmove-up (before other-window-now activate)
  (when buffer-file-name (save-buffer)))
(defadvice windmove-down (before other-window-now activate)
  (when buffer-file-name (save-buffer)))
(defadvice windmove-left (before other-window-now activate)
  (when buffer-file-name (save-buffer)))
(defadvice windmove-right (before other-window-now activate)
  (when buffer-file-name (save-buffer)))

(custom-set-faces
 ;; custom-set-faces was added by Custom.
 ;; If you edit it by hand, you could mess it up, so be careful.
 ;; Your init file should contain only one such instance.
 ;; If there is more than one, they won't work right.
 '(default ((t (:inherit nil :stipple nil :background "#fdf6e3" :foreground "#657b83" :inverse-video nil :box nil :strike-through nil :overline nil :underline nil :slant normal :weight normal :height 130 :width normal :foundry "apple" :family "Source Code Pro")))))
(custom-set-variables
 ;; custom-set-variables was added by Custom.
 ;; If you edit it by hand, you could mess it up, so be careful.
 ;; Your init file should contain only one such instance.
 ;; If there is more than one, they won't work right.
 '(magit-use-overlays nil)
 '(org-default-notes-file "~/Dropbox/orgfiles/inbox.org")
 '(org-directory "~/Dropbox/orgfiles"))
